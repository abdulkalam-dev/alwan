!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define("Alwan",[],e):"object"==typeof exports?exports.Alwan=e():t.Alwan=e()}(self,(function(){return function(){"use strict";var t={d:function(e,r){for(var l in r)t.o(r,l)&&!t.o(e,l)&&Object.defineProperty(e,l,{enumerable:!0,get:r[l]})},o:function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}},e={};t.d(e,{default:function(){return $t}});const r=document,l=r.documentElement,n="button",o="svg",s="open",i="close",a="color",u="click",p="mousedown",c="scroll",h="keydown",d="input",_="change",f="focusin",w="focusout",g="hex",m="rgb",b="hsl",v="hsv",y="lw-focus",x="lw-btn",A="lw-color",O="remove",j=[g,m,b],{max:L,min:$,round:H,abs:V}=Math,M=parseFloat,k=parseInt,S=(t,e)=>{for(const r in t)if(Object.hasOwnProperty.call(t,r)&&e(t[r],r,t))return!1;return!0},C=(t,...e)=>Object.assign(t,...e),E=(t,e)=>S(t,((t,r)=>!e||e[r]!==t)),I=t=>"string"==typeof t,z=t=>null!=t,P=(t,e,r)=>$(L(t,r||0),e||100),T=(t,e,r)=>{if(t._s.t(e,!0)){let e=t._e.i;e(a,r),e(_,r)}},D=t=>(H(t)%360+360)%360,F=(t,e,l)=>I(t)?t&&(e||r)["querySelector"+(l?"All":"")](t):t instanceof Element?t:null,N=(t,e,r,l,n)=>{l=l||{};const s="http://www.w3.org/"+(t===o?"2000/svg":"1999/xhtml"),i=document.createElementNS(s,t||"div");return e&&(i.className=e),S(l,((t,e)=>{"html"===e?J(i,t):"text"===e?i.innerText=t:t&&i.setAttributeNS("",e,t)})),r&&r.appendChild(i),n&&n(i),i},Z=t=>t&&t.getBoundingClientRect(),q=t=>t.parentElement,B=(t,e)=>q(e).replaceChild(t,e)&&t,K=(t,e)=>t&&q(t).removeChild(t)&&(e?null:t),R=(t,e,r)=>{t&&t.style.setProperty("--"+e,r)},U=(t,e)=>{let r=e&&e.length;null!=r&&(e=r),t.style.display=e?"":"none"},G=(t,e,r)=>{e&&t.classList[r?"add":O](e)},J=(t,e)=>{t.innerHTML=e||""},Q=(t,e)=>{let r=(e?O:"add")+"EventListener",[l,n,o,s]=t;I(n)&&(n=[n]),n.forEach((t=>{l[r](t,o,s)}))},W=(t,e,r,l,n)=>{if(e){let o=[e,r,l,n=n||!1];Q(o),t.push(o)}return t},X=(t,e)=>t.filter((t=>e!==t[0]||Q(t,!0))),Y="top",tt="right",et="bottom",rt="left",lt="start",nt="center",ot="end",st="width",it="height",at=t=>{let e,n,o,{config:a,_e:{i:u},_s:d}=t,_=N("","alwan",r.body),f={e:[]},w=!1,g=[];const m=t=>{var l;w&&(y(),l=e,g.every((t=>{let e=!0;if(t!==r){let{top:r,bottom:n}=Z(l),{top:o,bottom:s}=Z(t);e=r>=o&&s>=n}return e}))||A(!0))},b=t=>{let e=f.e;g.forEach((r=>{e=t(e,r,c,m)})),e=t(e,window,"resize",m),e=t(e,r,[p,h],v),f.e=e},v=r=>{if(w){let l,{target:n,type:s,key:i,shiftKey:a}=r,u=t._c.palette.$;"Escape"===i||s===p&&e!==n&&!_.contains(n)?A():"Tab"===i&&(n!==e||a?(!a&&n===o||n===u&&a)&&(l=e):l=u,l&&(r.preventDefault(),l.focus()))}},y=()=>{n&&n.u()},x=t=>{w||a.disabled||(d.u({},!0),y(),G(_,s,!0),w=!0,!t&&u(s))},A=t=>{w&&a.toggle&&(G(_,s,!1),w=!1,!t&&u(i))},O=t=>{a.disabled=t,t&&A(!0),G(e,"lw-disabled",t)};return C(f,{$:_,p:s=>{s=s||{};let i,a=C(t.config,s),{theme:u,popover:p,target:h,position:d,margin:f,disabled:w,id:m,toggle:v}=a,y=F(h),A=s.color;m&&(_.id=m),S(t._c,(t=>{let e=t._;e&&e(a)})),A&&T(t,A),e=t._c.ref.$,i=y||e,b(X),O(w),_.dataset.theme=u,v||x(!0),U(e,p||v),p?(n=((t,e,r)=>{r=r||{};let n,o,s,{margin:i,position:a}=r,[u,p]=a?a.split("-"):[],c={[Y]:[Y,et,tt,rt],[et]:[et,Y,tt,rt],[tt]:[tt,rt,Y,et],[rt]:[rt,tt,Y,et]},h={[lt]:[lt,nt,ot],[nt]:[nt,lt,ot],[ot]:[ot,nt,lt]};i=null==i?6:M(i),u=c[u]?u:et,p=p?h[p]?p:lt:nt;const d=(t,r)=>{!1!==r&&(e.style[t?Y:rt]=r+"px")},_=t=>{let e=st,r=tt;t&&(e=it,r=et),d(t,(n[r]-s[e])/2)},f=()=>{n={top:0,left:0,right:l.clientWidth,bottom:l.clientHeight},o=Z(t),s=Z(e),c[u].some((t=>{let e=t===Y||t===et,r=n[t],l=o[t],a=i+s[e?it:st],u=a<=V(r-l);return u&&(d(e,l+(r?i:-a)),h[p].some((t=>{let r=it,l=Y,i=et;e&&(r=st,l=rt,i=tt);let a=o[l],u=o[i],p=V(n[l]-u),c=V(n[i]-a),h=o[r],_=s[r],f=(_+h)/2,w={[lt]:_<=c&&a,[nt]:f<=p&&f<=c&&u-f,[ot]:_<=p&&u-_};return w=w[t],d(!e,w),!1!==w}))||_(!e)),u}))||(_(!0),_())};return f(),{u:f}})(i,_,{position:d,margin:f}),g=(t=>{t=q(t);let e=[r];for(;t!==r.body;){let r=getComputedStyle(t).overflow;"auto"!==r&&r!==c||e.push(t),t=q(t)}return e})(e),b(W)):i.insertAdjacentElement((y?"before":"after")+"end",_),G(_,"lw-popper",p),o=F("button,input",_,!0),o=o[o.length-1]},m:()=>w,A:x,O:A,j:()=>{w?A():x()},L:O,H:y})},ut={"aria-role":"none",focusable:"false"},pt=(t,e,r,l)=>({width:t,height:e,viewBox:r,html:l}),ct=C(pt("18","18","0 0 24 24",'<path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path>'),ut),ht=C(pt("18","18","0 0 24 24",'<path d="M9,20.42L2.79,14.21L5.62,11.38L9,14.77L18.88,4.88L21.71,7.71L9,20.42Z"></path>'),ut),dt=C(pt("15","15","0 0 20 20",'<path d="M10 1L5 8h10l-5-7zm0 18l5-7H5l5 7z"></path>'),ut),_t=(t,e)=>{const{_s:l,_e:{i:n}}=e,o=N("","alwan__palette",t,{tabindex:"0"}),s=N("","lw-overlay",t);U(s,!1);const i={ArrowRight:1,ArrowLeft:-1},u={ArrowUp:-1,ArrowDown:1},c=(t=>{const e=N("","alwan__marker",t),{width:r,height:l}=Z(e);let n=r/2,o=l/2,s=0,i=0;return{$:e,V:(t,r)=>{s=t,i=r,e.style.transform=`translate(${t-n}px, ${r-o}px)`},M:()=>({x:s,y:i})}})(o);let d,_,g,{V:m}=c,b=[],v=!1;const x=(t,e)=>{m(t,e),l.u({s:t/d,v:1-e/_}),n(a,o)},A=t=>{let e,r,{top:l,left:n}=g,o=t.touches;t.preventDefault(),o&&(t=o[0]),e=t.clientX-n,r=t.clientY-l,e=e<0?0:e>d?d:e,r=r<0?0:r>_?_:r,x(e,r)},O=t=>{({width:d,height:_}=t||Z(o))};return W(b,o,[p,"touchstart"],(t=>{t.touches&&t.touches.length>1||(l.k(),g=Z(o),O(g),A(t),v=!0,U(s,v),o.focus())})),W(b,r,["mousemove","touchmove"],(t=>{!v||t.touches&&t.touches.length>1||A(t)}),{passive:!1}),W(b,r,["mouseup","touchend","touchcancel"],(t=>{v&&(l.S(o),v=!1,U(s,v))})),W(b,o,[w,f],(t=>{let e=!1;t.type===w?o.blur():e=!v,G(o,y,e)})),W(b,o,h,(t=>{G(o,y,!0);let e=t.key;if(i[e]||u[e]){t.preventDefault(),O();let{x:r,y:l}=c.M(),n=r,o=l;r+=(i[e]||0)*(d/100),l+=(u[e]||0)*(_/100),r=r>d?d:r<0?0:r,l=l>_?_:l<0?0:l,r===n&&l===o||x(r,l)}})),{$:o,marker:c,C:t=>{O(),m(t.s*d,(1-t.v)*_)},e:b}},ft=t=>{let e=t.h/60,r=t.s,l=t.v,n=(t,e,r)=>255*(r-r*e*L(0,$(t,4-t,1)));return{r:H(n((5+e)%6,r,l)),g:H(n((3+e)%6,r,l)),b:H(n((1+e)%6,r,l)),a:t.a}},wt=(t,e)=>{let r=t;if(!I(t)){let l="",n="",o=", ";t.a<1&&(l="a",n=o+t.a);let s=e===b?"%":"";r=e+l+"("+t[e[0]]+o+t[e[1]]+s+o+t[e[2]]+s+n+")"}return r},gt=t=>{let e=t.toString(16);return e.length<2?"0"+e:e},mt=({r:t,g:e,b:r,a:l})=>"#"+gt(t)+gt(e)+gt(r)+(l<1?gt(H(255*l)):""),bt=(t,e)=>{e=e?"%":0;let r=t.v,l=r*(1-t.s/2),n=l&&1!==l?(r-l)/$(l,1-l):0;return{h:t.h,s:H(100*n)+e,l:H(100*l)+e,a:H(100*t.a)/100}},vt=N("canvas").getContext("2d"),yt=/^hsla?\(\s*([+-]?\d*\.?\d+)(\w*)?(?:(?:\s+([+-]?\d*\.?\d+)%\s*([+-]?\d*\.?\d+)%(?:\s*\/\s*([+-]?\d*\.?\d+%?))?)|(?:\s*,\s*([+-]?\d*\.?\d+)%\s*,\s*([+-]?\d*\.?\d+)%(?:\s*,\s*([+-]?\d*\.?\d+%?))?))\s*\)?$/i,xt=/^#[0-9a-f]{6}$/i,At=(t,e)=>{let r,l;if((t=t.trim()).length>=10){const e=t.match(yt);if(e){let t=M(e[1]),n=e[2],o=P(e[3]||e[6]),s=P(e[4]||e[7]),i=e[5]||e[8];t*="turn"===n?360:"rad"===n?180/PI:"grad"===n?.9:1,t=D(t),i=i?P("%"===i.slice(-1)?M(i)/100:i,1):1,r={h:t,s:o,l:s,a:i},l=b}}if(!r){if(vt.fillStyle="#000",vt.fillStyle=t,t=vt.fillStyle,xt.test(t))r={r:k((n=t).slice(1,3),16),g:k(n.slice(3,5),16),b:k(n.slice(5,7),16),a:1};else{let[e,l,n,o]=t.match(/\((.+)\)/)[1].split(",").map((t=>M(t)));r={r:e,g:l,b:n,a:o?H(100*o)/100:1}}l=m}var n;return e?wt(r,l):{I:r,P:l}},Ot=(t,e)=>{const r=t=>N("","alwan__container",t);let l=((t,e)=>{const r={$:t,e:[],_(e){let{preset:o,classname:s}=e,{$:i,e:a}=r;a=X(a,i),o!==(i!==t)&&(i=o?B(N(n,"lw-ref",null,{type:n,id:t.id}),t):B(t,i)),s&&s.split(/\s+/).map((t=>{G(i,t,!0)})),W(a,i,u,l),r.$=i,r.e=a}},l=t=>{e.toggle()};return r})(t,e),s=at(e),i=s.$,p=_t(i,e),c=r(i),m=((t,e)=>{let r=!1;const l=N("","lw-mr",t),s={e:[],_(t){let{preview:e,copy:r}=t,o=s.$,a=s.cp;e!==!!o&&(o=e?N("","alwan__preview",l):K(o,!0),r&&a&&(o||l).appendChild(a)),r?a||(a=N(n,x,o||l,{type:n},(t=>{i(t)}))):a=K(a,!0),U(l,a||o),s.$=o,s.cp=a}},i=t=>{t=t||s.cp,J(t),N(o,"",t,r?ht:ct)};return W(s.e,l,[u,"mouseleave",f,w],(t=>{if(s.cp&&!e.config.disabled){let l=t.type,n=l===f;r||l!==u?(n||r&&(r=!1,i()),G(s.cp,y,n)):(e._s.T(),r=!0,i())}})),s})(c,e),b=((t,e)=>{const r=N("","lw-w100",t),l=e._s.u,n=(t,e,l)=>N(d,t,r,{type:"range",max:e,step:l}),o={e:[],hue:n("alwan__slider alwan__slider--hue",360),alpha:null,_({opacity:t}){let e=o.alpha;t!==!!e&&(o.alpha=t?n("alwan__slider alwan__slider--alpha",1,.01):K(e,!0)||l({a:1}))},D(t){let{alpha:e,hue:r}=o;r.value=360-t.h,e&&(e.value=t.a)}};return W(o.e,r,[d,_],(t=>{let r=t.target,n=r.valueAsNumber,s={};r===o.hue?s.h=360-n:s.a=n,l(s),e._e.i(t.type===_?_:a,r)})),o})(c,e),v=((t,e)=>{let r,l,s,i,p=[],c=[];const{config:w,_s:m,_e:{i:b}}=e,v={_(e){let i,{inputs:a,format:u}=e;p=j.filter((t=>a[t])),i=p.length,i?(r||(r=N("","alwan__inputs",t)),1===i?l=K(l,!0):l||(l=N(n,x,t,{type:n},(t=>{N(o,"",t,dt)}))),s=L(p.indexOf(u),0),u=p[s]):(r=K(r,!0),l=K(l,!0),u=j.includes(u)?u:j[0]),w.format=u,y(u),U(t,i)},D(t){S(v.$,((e,r)=>{e.value=t[r]}))}},y=t=>{if(v.$={},i=[],r){let{singleInput:e,opacity:l}=w,n=e||t==g?[t]:(t+(l?"a":"")).split("");J(r),n.forEach(((t,e)=>{N("label","lw-label",r,!1,(r=>{v.$[t]=i[e]=N(d,"alwan__input",r,{type:"text"}),N("span","",r,{text:t})}))})),m.u({})}};return W(c,t,u,(t=>{t.target===l&&(s=(s+1)%p.length,w.format=p[s],y(p[s]))})),W(c,t,d,(t=>{let e=t.target.value;if(e.trim()){let t="",r=p[s];t=w.singleInput||r===g?e:r+"("+i.reduce(((t,e)=>(t&&t+",")+e.value),"")+")",m.t(t,v)&&b(a,v.$)}})),W(c,t,[f,_],(t=>{t.type===f?m.k():m.S(v.$)})),W(c,t,h,(t=>{"Enter"===t.key&&e.close()})),v.e=c,v})(r(i),e),O=((t,e)=>{let r,l=N("","alwan__swatches",t);const o=t=>N(n,"alwan__swatch",l,{type:n},(e=>{R(e,A,At(t,!0))})),s={e:[],_(t){let e=[];r=t.swatches,U(l,r),J(l),r.forEach(((t,r)=>{e[r]=o(t)})),s.$=e},F(t){let e=r.push(t)-1;s.$[e]=o(t),U(l,r)},N(t){let e=r.findIndex(((e,r)=>t===e||k(t)===r)),n=s.$;e>-1&&(r.splice(e,1),K(n[e]),n.splice(e,1),U(l,r))}};return W(s.e,t,u,(t=>{let r=t.target;q(r)===l&&T(e,r.style.getPropertyValue("--lw-color"),r)})),s})(i,e);return{ref:l,app:s,palette:p,preview:m,sliders:b,inputs:v,swatches:O}},jt=t=>{let e,n={h:0,s:0,v:0,a:1},o=ft(n),s="",{config:i,_e:a}=t;const u=(t,e)=>{let r=(t=t||i.format)===g,l=r?mt(o):t===b?bt(n,!e):o;return e||r?{[t]:wt(l,t)}:l},p=(t,e,r,l)=>{i.opacity&&(r+="a");let n=l?[]:{};return r!==v&&(n.toString=()=>e||wt(t,r)),r.split("").reduce(((e,r,n)=>(e[l?n:r]=t[r],e)),n)};return{u(e,r,l){if(!i.disabled){C(n,e),o=l||ft(n),s=wt(o,m);let a=t._c,{palette:p,sliders:c,inputs:h}=a;R(a.preview.$,A,s),R(a.ref.$,A,s),(r||!z(e.a))&&R(c.alpha,m,o.r+","+o.g+","+o.b),z(e.h)&&R(p.$,"hue",n.h),r!==h&&h.D(u("",i.singleInput)),r&&(c.D(n),p.C(n))}},t(t,e){if(I(t)){let r,l,{I:n,P:o}=At(t),s=u(o),i=!E(n,s);return i&&(o===b?l=(t=>{let e=t.s/100,r=t.l/100,l=r+e*$(r,1-r);return{h:t.h,s:l?2*(1-r/l):0,v:l,a:t.a}})(n):(r=n,l=(t=>{let e=t.r/255,r=t.g/255,l=t.b/255,n=L(e,r,l),o=n-$(e,r,l),s=0===n?0:o/n;return{h:H((360+60*(0===o?0:n===e?(r-l)/o%6:n===r?(l-e)/o+2:n===l?(e-r)/o+4:0))%360),s:s,v:n,a:H(100*t.a)/100}})(n)),this.u(l,e,r)),i}},T(){S(u("",!0),(t=>{let e=navigator.clipboard;e?e.writeText(t):N(d,"",l,null,(e=>{e.value=t,e.select(),r.execCommand("copy"),K(e)}))}))},Z:{[v]:()=>p(n,"",v,!1),[m]:t=>p(o,s,m,t),[b]:t=>p(bt(n),"",b,t),[g]:()=>mt(o)},k(){e=u()},S(t){E(e,u())||a.i(_,t)}}};function Lt(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}class $t{constructor(t,e){const r=this;t=F(t),r.config=C({},$t.defaults,e),r._e=(t=>{const e={[s]:[],[i]:[],[_]:[],[a]:[]};return{i:(r,l)=>{!t.config.disabled&&e[r]&&e[r].forEach((e=>{r===a||r===_?e(t._s.Z,l||t):e()}))},q:(t,r)=>{e[t]&&e[t].push(r)},B:(t,r)=>{let l=e[t];l?e[t]=r?l.filter((t=>t!==r)):[]:null==t&&S(e,((t,r)=>{e[r]=[]}))}}})(r),r._s=jt(r),r._c=Ot(t,r),r._c.app.p(r.config)}setOptions(t){this._c.app.p(t)}isOpen(){return this._c.app.m()}open(){this._c.app.A()}close(){this._c.app.O()}toggle(){this._c.app.j()}on(t,e){this._e.q(t,e)}off(t,e){this._e.B(t,e)}setColor(t){let e,r=this;return I(t)||(e=[m,b,v].find((e=>e.split("").every((e=>!isNaN(t[e])&&""!==t[e])))),e&&(null==t.a&&(t.a=1),e===v?r._s.u({h:D(t.h),s:P(t.s)/100,v:P(t.v)/100,a:t.a},!0):t=wt(t,e))),r._s.t(t,!0),r}getColor(){return this._s.Z}addSwatch(t){this._c.swatches.F(t)}removeSwatch(t){this._c.swatches.N(t)}enable(){this._c.app.L(!1)}disable(){this._c.app.L(!0)}reset(){T(this,this.config.default)}reposition(){this._c.app.H()}trigger(t){this._e.i(t)}destroy(){let t=this,e=t._c;e.ref._({preset:!1}),K(e.app.$),S(e,(t=>{t.e.forEach((t=>{Q(t,!0)}))})),S(t,((e,r)=>{delete t[r]})),Object.setPrototypeOf(t,Object.prototype)}}return Lt($t,"version","1.0.5"),Lt($t,"defaults",{id:"",classname:"",theme:"light",toggle:!0,popover:!0,position:"bottom-start",margin:8,preset:!0,color:"#000",default:"#000",target:"",disabled:!1,format:"rgb",singleInput:!1,inputs:{rgb:!0,hex:!0,hsl:!0},opacity:!0,preview:!0,copy:!0,swatches:[]}),e=e.default}()}));
//# sourceMappingURL=alwan.min.js.map